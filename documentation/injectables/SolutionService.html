<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Documentation PRD</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avaoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);

               if ($darkModeToggles.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">Documentation PRD</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >SolutionService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/solution.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Service gérant la construction de la solution</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#citiesPosition" >citiesPosition</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#instanceSolutionUrl" >instanceSolutionUrl</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#instanceUrl" >instanceUrl</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#mapDataUrl" >mapDataUrl</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#solution" >solution</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#types" >types</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#drawCities" >drawCities</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#findCityNameById" >findCityNameById</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getCitiesPosition" >getCitiesPosition</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getInstance" >getInstance</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getInstanceSolution" >getInstanceSolution</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getMapData" >getMapData</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getSolution" >getSolution</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#parseCities" >parseCities</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#parseCitiesPosition" >parseCitiesPosition</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#parseRepartitionTube" >parseRepartitionTube</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#parseSolution" >parseSolution</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(http: HttpClient)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/app/solution.service.ts:44</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Constructeur du service</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>http</td>
                                                  
                                                        <td>
                                                                    <code>HttpClient</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Client HTTP permettant de faire les requêtes pour récupérer les données via les fichiers txt</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drawCities"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>drawCities</b></span>
                        <a href="#drawCities"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>drawCities(map: L.Map, cities: <a href="../interfaces/City.html" target="_self">City[]</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="101"
                                    class="link-to-prism">src/app/solution.service.ts:101</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Ajoute les marqueurs associés à chaque ville sur la carte Leaflet</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>map</td>
                                            <td>
                                                        <code>L.Map</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Carte sur laquelle ajouter les marqueurs</p>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>cities</td>
                                            <td>
                                                            <code><a href="../interfaces/City.html" target="_self" >City[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Tableau des villes à ajouter</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>L.Marker[]</code>

                        </div>
                            <div class="io-description">
                                <p>La liste des marqueurs créés</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findCityNameById"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>findCityNameById</b></span>
                        <a href="#findCityNameById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findCityNameById(cities: <a href="../interfaces/City.html" target="_self">City[]</a>, id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank">Number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="283"
                                    class="link-to-prism">src/app/solution.service.ts:283</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Renvoie la ville associée à l&#39;id donné en paramètre</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>cities</td>
                                            <td>
                                                            <code><a href="../interfaces/City.html" target="_self" >City[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Le tableau des villes à chercher</p>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank" >Number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>Le numéro de la ville à trouver</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                <p>Le nom de la ville correspondant à l&#39;id donné en paramètre, sinon une chaîne vide si aucune ville ne correspond</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCitiesPosition"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getCitiesPosition</b></span>
                        <a href="#getCitiesPosition"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getCitiesPosition()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="83"
                                    class="link-to-prism">src/app/solution.service.ts:83</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Renvoie la position des marqueurs de chaque ville</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Map&lt;string, number[]&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>Un tableau contenant la position des marqueurs associés à chaque ville</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getInstance"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getInstance</b></span>
                        <a href="#getInstance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getInstance()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="67"
                                    class="link-to-prism">src/app/solution.service.ts:67</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Renvoie l&#39;instance texte en entrée du modèle</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                <p>L&#39;instance texte en entrée du modèle sous la forme d&#39;un Observable</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getInstanceSolution"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getInstanceSolution</b></span>
                        <a href="#getInstanceSolution"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getInstanceSolution()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="75"
                                    class="link-to-prism">src/app/solution.service.ts:75</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Renvoie la solution texte proposée par le modèle</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                <p>La solution texte proposée par le modèle sous la forme d&#39;un Observable</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMapData"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getMapData</b></span>
                        <a href="#getMapData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getMapData()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="59"
                                    class="link-to-prism">src/app/solution.service.ts:59</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Renvoie les données de la carte</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                <p>Les données de la carte sous la forme d&#39;un Observable</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSolution"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getSolution</b></span>
                        <a href="#getSolution"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getSolution()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="91"
                                    class="link-to-prism">src/app/solution.service.ts:91</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Renvoie la solution proposée par le modèle</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Solution.html" target="_self" >Solution</a></code>

                        </div>
                            <div class="io-description">
                                <p>La solution proposée par le modèle sous la forme d&#39;un objet Solution</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseCities"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>parseCities</b></span>
                        <a href="#parseCities"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>parseCities()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="124"
                                    class="link-to-prism">src/app/solution.service.ts:124</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Initialise le tableau des villes grâce aux données de la carte</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/City.html" target="_self" >City[]</a></code>

                        </div>
                            <div class="io-description">
                                <p>La liste des villes</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseCitiesPosition"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>parseCitiesPosition</b></span>
                        <a href="#parseCitiesPosition"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>parseCitiesPosition()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="148"
                                    class="link-to-prism">src/app/solution.service.ts:148</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Initialise la position des marqueurs associés à chaque ville depuis les données de la carte</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Map&lt;string, number[]&gt;</code>

                        </div>
                            <div class="io-description">
                                <p>La liste des positions des marqueurs associés à chaque ville</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseRepartitionTube"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>parseRepartitionTube</b></span>
                        <a href="#parseRepartitionTube"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>parseRepartitionTube()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="259"
                                    class="link-to-prism">src/app/solution.service.ts:259</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Retourne l&#39;indice des villes associée à chaque tube proposée par le modèle (répartition par tubes)</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>[][]</code>

                        </div>
                            <div class="io-description">
                                <p>La liste des arcs</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseSolution"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>parseSolution</b></span>
                        <a href="#parseSolution"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>parseSolution()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="169"
                                    class="link-to-prism">src/app/solution.service.ts:169</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Initialise la solution</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Solution.html" target="_self" >Solution</a></code>

                        </div>
                            <div class="io-description">
                                <p>La solution proposée par le mèdle sous la forme d&#39;un objet Solution</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="citiesPosition"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>citiesPosition</b></span>
                        <a href="#citiesPosition"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Map&lt;string | number[]&gt;</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">src/app/solution.service.ts:39</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Tableau contenant la position des marqueurs associés à chaque ville</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="instanceSolutionUrl"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>instanceSolutionUrl</b></span>
                        <a href="#instanceSolutionUrl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&quot;assets/solution_data/solution_instance.txt&quot;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/app/solution.service.ts:28</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>URL de la solution proposée par le modèle</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="instanceUrl"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>instanceUrl</b></span>
                        <a href="#instanceUrl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&quot;assets/solution_data/instance.txt&quot;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/app/solution.service.ts:23</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>URL de l&#39;instance d&#39;entrée du modèle</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mapDataUrl"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>mapDataUrl</b></span>
                        <a href="#mapDataUrl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&quot;assets/map_data/map.geojson&quot;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">src/app/solution.service.ts:18</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>URL des données de la carte</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="solution"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>solution</b></span>
                        <a href="#solution"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/Solution.html" target="_self" >Solution</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/app/solution.service.ts:44</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Contient la solution proposée par le modèle sous la forme d&#39;un objet Solution</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="types"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>types</b></span>
                        <a href="#types"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>string[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[&quot;LCR&quot;,&quot;SER&quot;,&quot;PLA&quot;]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/app/solution.service.ts:34</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Liste des types de tube différents</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { HttpClient } from &#x27;@angular/common/http&#x27;;
import { Injectable } from &#x27;@angular/core&#x27;;
import L, { LatLngExpression } from &#x27;leaflet&#x27;;
import &#x27;leaflet-arrowheads&#x27;;
import { Solution, City, Cohorte, Arc } from &#x27;./include/interfaces&#x27;;

/**
 * Service gérant la construction de la solution
 */
@Injectable({
  providedIn: &#x27;root&#x27;
})
export class SolutionService {
  // TODO: Les données de la carte (villes ect...) sont créées manuellement, peut-être pouvoir choisir la liste des villes ?
  /**
   * URL des données de la carte
   */
  private mapDataUrl:string &#x3D; &quot;assets/map_data/map.geojson&quot;;

  /**
   * URL de l&#x27;instance d&#x27;entrée du modèle
   */
  private instanceUrl:string &#x3D; &quot;assets/solution_data/instance.txt&quot;;

  /**
   * URL de la solution proposée par le modèle
   */
  private instanceSolutionUrl:string &#x3D; &quot;assets/solution_data/solution_instance.txt&quot;;

  // TODO: Les types de tubes sont créées manuellement, peut-être pouvoir choisir la liste des types ?
  /**
   * Liste des types de tube différents
   */
  private types:string[] &#x3D; [&quot;LCR&quot;,&quot;SER&quot;,&quot;PLA&quot;];

  /**
   * Tableau contenant la position des marqueurs associés à chaque ville
   */
  private citiesPosition: Map&lt;string,number[]&gt;;

  /**
   * Contient la solution proposée par le modèle sous la forme d&#x27;un objet Solution
   */
  private solution: Solution;

  /**
   * Constructeur du service
   * @param http Client HTTP permettant de faire les requêtes pour récupérer les données via les fichiers txt
   */
  constructor(protected http:HttpClient) {
    this.citiesPosition &#x3D; this.parseCitiesPosition();
    this.solution &#x3D; this.parseSolution();
  }

  /**
   * Renvoie les données de la carte
   * @returns Les données de la carte sous la forme d&#x27;un Observable
   */
  private getMapData(){
    return this.http.get(this.mapDataUrl);
  }

  /** 
   * Renvoie l&#x27;instance texte en entrée du modèle
   * @returns L&#x27;instance texte en entrée du modèle sous la forme d&#x27;un Observable
   */
  private getInstance(){
    return this.http.get(this.instanceUrl, { responseType: &#x27;text&#x27;});
  }

  /**
   * Renvoie la solution texte proposée par le modèle
   * @returns La solution texte proposée par le modèle sous la forme d&#x27;un Observable
   */
  private getInstanceSolution(){
    return this.http.get(this.instanceSolutionUrl, { responseType: &#x27;text&#x27;});
  }

  /**
   * Renvoie la position des marqueurs de chaque ville
   * @returns Un tableau contenant la position des marqueurs associés à chaque ville
   */
  public getCitiesPosition(): Map&lt;string, number[]&gt; {
    return this.citiesPosition;
  }

  /**
   * Renvoie la solution proposée par le modèle
   * @returns La solution proposée par le modèle sous la forme d&#x27;un objet Solution
   */
  public getSolution(): Solution{
    return this.solution;
  }

  /**
   * Ajoute les marqueurs associés à chaque ville sur la carte Leaflet
   * @param map Carte sur laquelle ajouter les marqueurs
   * @param cities Tableau des villes à ajouter
   * @returns La liste des marqueurs créés
   */
  public drawCities(map: L.Map, cities:City[]): L.Marker[]{ 
    var markersArray: L.Marker[] &#x3D; [];
    setTimeout(() &#x3D;&gt; {
      for (const city of cities) {
        // Ugly line to work around &quot;LatLngExpression is not assignable to number | any | undefined...&quot;
        let latlngs:LatLngExpression &#x3D; [this.citiesPosition.get(city.name)![0], this.citiesPosition.get(city.name)![1]];

        const marker &#x3D; L.marker(latlngs, {alt: city.name});

        // Ajout du marqueur à la cart
        marker.addTo(map);

        markersArray.push(marker);
      }
    }, 500);
    
    return markersArray;
  }

  /**
   * Initialise le tableau des villes grâce aux données de la carte
   * @returns La liste des villes
   */
  private parseCities(): City[]{
    var cities:City[] &#x3D; [];
    setTimeout(() &#x3D;&gt; {
      this.getMapData().subscribe((data:any) &#x3D;&gt; {
        for (const city of data.features) {
          const name &#x3D; city.properties.name;
          const id &#x3D; city.id; 
          var cityToAdd: City &#x3D; {
            name: name,
            id: id,
            cohorte: false
          }
          cities.push(cityToAdd);
        }
      });
    }, 200);
    
    return cities;
  }

  /**
   * Initialise la position des marqueurs associés à chaque ville depuis les données de la carte
   * @returns La liste des positions des marqueurs associés à chaque ville
   */
  private parseCitiesPosition(): Map&lt;string, number[]&gt;{
    let citiesPosition: Map&lt;string, number[]&gt; &#x3D; new Map();
    setTimeout((() &#x3D;&gt;{
      this.getMapData().subscribe((cities:any) &#x3D;&gt; {
        for (const city of cities.features) {
          const lat &#x3D; city.geometry.coordinates[0];
          const lon &#x3D; city.geometry.coordinates[1];
          const name &#x3D; city.properties.name; 
          
          citiesPosition.set(name, [lat,lon]);
        }
      });
    }),100);
    
    return citiesPosition;
  }

  /**
   * Initialise la solution
   * @returns La solution proposée par le mèdle sous la forme d&#x27;un objet Solution
   */
  private parseSolution(): Solution{
    var solution:Solution &#x3D; {
      cities: this.parseCities(),
      // TODO: Adapter en fonction du nombre de types donné par l&#x27;instance du modèle
      types: this.types.slice(0,2),
      cohortes: [],
      demande: new Map&lt;string, Map&lt;string, number&gt;&gt;()
    }

    setTimeout(() &#x3D;&gt;{
      this.getInstance().subscribe(data &#x3D;&gt; {
        var textLines &#x3D; data.split(&#x27;\n&#x27;);
        var nbVilles &#x3D; Number(textLines[0]);
        var nbCohortes &#x3D; Number(textLines[1]);
        var cohorteVilleline &#x3D; textLines[2].split(&#x27;\t&#x27;);
        var cohorteNbPatientsline &#x3D; textLines[3].split(&#x27;\t&#x27;);
        for (var i &#x3D; 0; i &lt; nbCohortes; i++){
          var villeId &#x3D; Number(cohorteVilleline[i]) - 1;
          solution.cities[villeId].cohorte &#x3D; true;
          solution.cohortes.push({
            nbPatients: Number(cohorteNbPatientsline[i]),
            city: solution.cities[villeId].name,
            types: []
          });
        }

        var nbTypes &#x3D; Number(textLines[4]);
        var nbTubes &#x3D; Number(textLines[5]);
        for(var i &#x3D; 0; i &lt; nbCohortes; i++){
          for(var j &#x3D; 0; j &lt; nbTypes; j++){
            solution.cohortes[i].types.push({
              name: this.types[j],
              tubes: []
            });
            var volumeTubesLine &#x3D; textLines[6+i*nbCohortes+j].split(&#x27;\t&#x27;);
            for(var k &#x3D; 0; k &lt; nbTubes; k++){
              solution.cohortes[i].types[j].tubes.push({
                number: k+1,
                volume: Number(volumeTubesLine[k]),
                arcs: []
              });

            }
          }
        }

        for(var i &#x3D; 0; i &lt; nbVilles; i++){
          solution.demande.set(solution.cities[i].name, new Map&lt;string, number&gt;());
          var demandeLine &#x3D; textLines[6+nbTypes*nbCohortes + i].split(&#x27;\t&#x27;);
          for(var j &#x3D; 0; j &lt; nbTypes; j++){
            solution.demande.get(solution.cities[i].name)!.set(solution.types[j],Number(demandeLine[j]));
          }
        }

        var indiceVilles &#x3D; this.parseRepartitionTube();
        var colors &#x3D; [&#x27;red&#x27;, &#x27;blue&#x27;, &#x27;green&#x27;];

        setTimeout(() &#x3D;&gt;{
          for(var i &#x3D; 0; i &lt; nbCohortes; i++){
            var villeCohorte &#x3D; solution.cohortes[i].city;
            for(var j &#x3D; 0; j &lt; nbTypes; j++){
              for(var k &#x3D; 0; k &lt; nbTubes; k++){
                var indice &#x3D; i*nbTypes*nbTubes + j*nbTubes + k;
                for(var l &#x3D; 0; l &lt; indiceVilles[indice].length; l++){
                  var destination &#x3D; this.findCityNameById(solution.cities, indiceVilles[indice][l]);
                  var originPoint: LatLngExpression &#x3D; [this.citiesPosition.get(villeCohorte)![0], this.citiesPosition.get(villeCohorte)![1]];
                  var destinationPoint: LatLngExpression &#x3D; [this.citiesPosition.get(destination)![0], this.citiesPosition.get(destination)![1]];
                  var latlngs:LatLngExpression[] &#x3D; [originPoint, destinationPoint];
                  solution.cohortes[i].types[j].tubes[k].arcs.push({
                    polyline: L.polyline(latlngs,{color: colors[solution.cohortes[i].types[j].tubes[k].number!-1], weight: 5, opacity: 0.7}).arrowheads({size: &quot;15px&quot;, opacity: 0.7, fill: false, yawn: 75,offsets: {end: &#x27;75px&#x27;}}),
                    origin: villeCohorte,
                    destination: destination,
                    index: l,
                    // TODO: Remplir automatiquement avec les demandes de chaque ville et pas 0
                    quantity: 0
                  }); 
                }
              }
            }
          }
        },1000);
      });
    },300);
    return solution;
  }

  /**
   * Retourne l&#x27;indice des villes associée à chaque tube proposée par le modèle (répartition par tubes)
   * @returns La liste des arcs
   */
  private parseRepartitionTube(): number[][] {
    var indiceVilles: number[][] &#x3D; [];
    setTimeout(() &#x3D;&gt;{
      this.getInstanceSolution().subscribe(data &#x3D;&gt;{
        var textLines &#x3D; data.split(&#x27;\n&#x27;);
        for(var i &#x3D; 0; i &lt; textLines.length; i++){
          var line &#x3D; textLines[i].split(&#x27; &#x27;);
          var indiceVilleTube: number[] &#x3D; [];
          for(var j &#x3D; 0; j &lt; line.length; j++){
              indiceVilleTube.push(Number(line[j]));
          }
          indiceVilles.push(indiceVilleTube);
        }
      });
    },100);
    return indiceVilles;
  }

  /**
   * Renvoie la ville associée à l&#x27;id donné en paramètre
   * @param cities Le tableau des villes à chercher
   * @param id Le numéro de la ville à trouver
   * @returns Le nom de la ville correspondant à l&#x27;id donné en paramètre, sinon une chaîne vide si aucune ville ne correspond
   */
  private findCityNameById(cities:City[], id:Number) : string {
    for (const city of cities){
      if (city.id &#x3D;&#x3D; id){
        return city.name;
      }
    }
    return &quot;&quot;;
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'SolutionService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
